<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
    rel="stylesheet"
    type="text/css"

    media="screen"
    href="{{ url_for('static',filename='/../../static/styles/Admin/studentProfile.css') }}"

    
  />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Oxygen&family=Source+Sans+Pro:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <script src="main.js"></script>
    <style>
      .content .left {
  margin: 10px;
  width: 210px;
  height: 450px;
  background-color: #190761;
  border-radius: 10px;
}
body{
        background-color: rgb(230, 228, 228);
      }
      .right .tab .box{
        background-color: rgb(243, 243, 243);
        
      }
.right .tab{
  height:350px;
}
.right .tab .bar{
  background-color: rgb(0, 0, 0);
}
.right .tab .box .actions .btns {
  margin-left: 30px;
  margin-top: -40px;
 
}
.right .tab .box .actions .btns button{
  background-color: rgb(12, 9, 9);
}
.content .left li{
       font-size:15px;
     }

 
    </style>
  </head>
  <body>
    <div class="nav">
      <div class="nav-brand">
        <h3>ADMIN</h3>
      </div>
      <h4>Logout</h4>
    </div>

    <div class="content">
      <div class="left">
        <ul >
          <li style="padding-top:10px;"><a style=" color: rgb(255, 255, 255);text-decoration: none;" href="/admin/dashboard">DASHBOARD</a></li>
          <li style="padding-top:0px;"> <a style=" color: white;text-decoration: none;" href="/admin/students"> üë®üèª‚Äçüéì Students</a></li>
          <li style="padding-top:0px;"><a style=" color: white;text-decoration: none;" href="/admin/faculties">üë®üèº‚Äçüè´ Faculties</a></li>
          <li style="padding-top:0px;"><a style=" color: white;text-decoration: none;" href="/admin/enter_attendance">üìÖ Attendance</a></li>
          <li style="padding-top:0px;"><a style=" color: rgb(255, 255, 255);text-decoration: none;"> ‚úÖ Marks</a></li>
          <li style="padding-top:0px;"><a style=" color: white;text-decoration: none;" href="/admin/events"> üéâ Events</a></li>
         
      </ul>
      </div>
      <div class="right">

        <div class="tab">
          <div class="bar">
              <h3>{{account.fname}}</h3>
             
          </div>
        <div class="box">
                <h3>Student Details</h3>
             <div  class="st-section1">
         
                      <div class="st-img" >
                          <img src='/../../static/styles/Admin/images/students/{{account.profile_img}}'/>
                      </div>
                      <div class="st-info1">
                        
                        <p>Admission No:  <span style="margin-left:10px;">{{account.admission_number}}</span> </p>
                        <p>Student Name: <span style="margin-left:10px;">{{account.fname}}</span></p>
                        <p>Gender: {{account.gender}}</p>
                        <p>Date of birth : {{account.dob}}</p>
                        <p>Religion : {{account.religion}}</p>
                        <p>Phone No: {{account.phone}}</p>
                        
                      
                      </div>
                      <div class="st-info2">
                        <p>Address :{{account.address}}</p>
                        <p>Email: {{account.email}}</p>
                        <p>Course: {{account.course}}</p>
                        <p>Batch : {{account.batch}}</p>
                        <p>Profile approval status: 
                          {% if account.approval %}
                            <span style="color:rgb(50, 158, 0) ;padding-left:20px">‚úÖApproved</span></p>
                            {% else %}
                            <span style="color:rgb(255, 32, 32)" id="notap">‚ùåNot Approved</span></p>
                      {% endif %}
                        
                        
                        
                    </div>

               </div>
               
               <div class="actions">
                <div class="btns">
                  {% if account.approval %}
                  <button disabled  style="background-color: rgb(138, 134, 134);"  >APPROVED</button>
                  {% else%}
                  <button id="ap-btn" style="background-color: rgb(143, 136, 136);" onclick="approveStudent('{{account.admission_number}}')" >APPROVE</button>
                  
                  {% endif%}
                </div>
                  <div class="btns">
                    <a href="/admin/editStudentProfile/{{account.id}}/{{account.admission_number}}"><button style="background-color: rgb(131, 131, 131);">EDIT</button></a>
                  </div>
                  <div class="btns">
                    <button style="background-color: rgb(122, 118, 118);" onclick="deleteStudent('{{account.admission_number}}')">DELETE</button>
                  </div>
                  <div class="btns">
                    <a href="/admin/view_marks/{{account.id}}/{{account.admission_number}}"><button style="background-color: rgb(139, 137, 137);">MARKS</button></a>
                  </div>
                  <div class="btns">
                    <a href="/admin/view_attendance/{{account.id}}/{{account.admission_number}}"><button style="background-color: rgb(122, 118, 118);">ATTENDANCE</button></a>
                  </div>
              </div>
             
          </div>
        
         
      </div>
        
      </div>
    </div>
    <!-- <div class="more">
       <div class="sec2">

       </div>
    </div> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <script>
      const deleteStudent=(id)=>{
        
        Swal.fire({
  title: 'Do you want to delete this student?',
  showCancelButton: true,
  confirmButtonText: `Delete`,
  
}).then((result) => {

  if(val){
          $.ajax({
            data : {
               id:id
                   },
               type : 'POST',
               url : '/admin/deletestudent'
              })
          .done(function(data) {
            if(data.status){
              Swal.fire('Deleted!', '', 'success')
              setTimeout(()=>{
                location.href="/admin/students"
              },2000)
              
         
            }
            else{
              Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Something went wrong!',
                footer: '<a href="">Why do I have this issue?</a>'
              })
               
            }
        });
         }


   
  
})






         
      }

      const approveStudent=(id)=>{
        let val= confirm("Are you sure ..?");
         if(val){

          let spn=document.getElementById("notap");
          let btn=document.getElementById("ap-btn")

          $.ajax({
            data : {
               id:id
                   },
               type : 'POST',
               url : '/admin/approve'
              })
          .done(function(data) {
            if(data.status){
              Swal.fire({
                  position: 'top-end',
                  icon: 'success',
                  title: 'This profile has been approved',
                  showConfirmButton: false,
                  timer: 1500
                })
               spn.innerHTML="‚úÖApproved"
               spn.style.color="green"
                btn.innerHTML="Approved";
                btn.style.backgroundColor="grey"
                btn.disabled=true;
         
            }
            else{
              
               alert("Something went rong please try again")
            }
        });
         }

      }
    </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
